<!-- Add to list modal -->
<div class="flex justify-center items-center fixed top-0 left-0 w-screen h-screen z-50 bg-black/60"
  *ngIf="listModalActive">
  <!-- normal bg -->
  <div class="absolute w-full h-full z-10" (click)="hideListModal()"></div>
  <!-- Loader -->
  <div class="flex justify-center items-center w-full h-full" *ngIf="isListLoading"><app-loader></app-loader></div>
  <!-- lists -->
  <div class="p-5 w-full max-w-[400px] rounded-xl z-20 bg-white text-slate-950" *ngIf="!isListLoading">
    <h1 class="pb-5 text-center text-xl">Choose List</h1>
    <div class="flex flex-col justify-between">

      <ul class="flex flex-col gap-2 h-[300px] overflow-auto" *ngIf="!isListLoading">
        <li
          class="p-2 w-full rounded-md text-sm bg-amber-50/20 shadow-md shadow-black/10 cursor-pointer ease-out transition-all hover:-translate-y-1"
          [ngClass]="{'active-list-item' : activeListItem == list.id}" *ngFor="let list of lists"
          (click)="activateListItem(list.id)">
          {{list.name}}
        </li>
      </ul>
      <button class="flex justify-center items-center mt-3 w-full bg-emerald-800 hover:bg-emerald-950 text-white"
        (click)="addMovieToList(activeListItem, movieToAdd)">Add
        Movie</button>
    </div>
  </div>
</div>



<div class="mx-auto w-full max-w-screen-xl">
  <!-- Banner -->
  <div class="p-10 w-full bg-sky-700">
    <h1 class="pt-5 text-3xl">Welcome, {{username}}.</h1>
    <p class="text-2xl">Millions of movies to discover. Explore now.</p>
  </div>

  <!-- Loader -->
  <div class="flex justify-center items-center w-full h-60" *ngIf="isLoading">
    <app-loader></app-loader>
  </div>

  <!-- Movie list -->
  <div class="my-10 px-5" *ngIf="!isLoading">
    <h2 class="mb-5 font-semibold text-xl text-slate-950">Popular Movies</h2>
    <ul
      class="grid gap-5 grid-cols-[repeat(auto-fill,_minmax(125px,_1fr))] sm:grid-cols-[repeat(auto-fill,_minmax(150px,_1fr))] md:grid-cols-[repeat(auto-fill,_minmax(200px,_1fr))]">
      <!-- Movie card -->
      <li *ngFor="let movie of movies | paginate: {id: 'server', itemsPerPage: 20, currentPage: p, totalItems: total}">
        <!-- Image card -->
        <div class="relative">
          <!-- Image container-->
          <div class="rounded-xl overflow-hidden cursor-pointer" routerLink="/browse/movie/{{movie.id}}">
            <img class="aspect-[0.667] bg-gray-500" src="{{imageBaseUrl}}{{movie.poster_path}}"
              alt="{{movie.title}} poster">
          </div>
          <!-- Icons -->
          <div class="flex flex-col items-center absolute top-3 right-2 z-10">
            <fa-icon
              class="text-2xl text-white/80 cursor-pointer transition-all ease-in-out duration-300 hover:text-blue-500"
              [icon]="faSquarePlus" (click)="showListModal(movie)"></fa-icon>
          </div>
          <!-- Movie rating-->
          <div
            class="flex justify-center items-center absolute -bottom-2 -left-2 w-11 h-11 rounded-full border-solid border-2  bg-purple-900 text-sm">
            <div *ngIf="movie.totalVotes == 0">N/A</div>
            <div *ngIf="movie.totalVotes > 0">{{movie.totalRating}}</div>
          </div>
        </div>
        <!-- Movie details -->
        <p class="mt-3 font-semibold text-base text-slate-950">{{movie.title}}</p>
        <p class="text-sm text-slate-700">{{movie.release_date}}</p>
      </li>
    </ul>
  </div>

  <!-- Pagination -->
  <div class="flex justify-center items-center mt-5 mb-10" *ngIf="!isLoading">
    <pagination-controls class="pagination" (pageChange)="loadMovies($event)" id="server" [maxSize]="5" previousLabel=""
      nextLabel=""></pagination-controls>
  </div>

  <router-outlet></router-outlet>
</div>