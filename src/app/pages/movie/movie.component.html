<!-- Loader -->
<div class="flex justify-center items-center w-full h-[200px]" *ngIf="isLoading">
  <app-loader></app-loader>
</div>

<div *ngIf="!isLoading">
  <!-- Banner -->
  <div class="flex justify-center relative pt-10 pb-14">
    <!-- Backdrop -->
    <img class="absolute top-0 left-0 w-full h-full object-cover -z-20 backdrop-brightness-50"
      src="{{imageBaseUrl}}/original/{{movie.backdrop_path}}" alt="">
    <!-- Filter -->
    <div class="absolute top-0 left-0 w-full h-full bg-black -z-10 opacity-60"></div>
    <div class="flex justify-center items-center w-full max-w-screen-lg gap-10">
      <!-- Image-->
      <div class="min-w-[300px] h-[450px] rounded-md overflow-hidden">
        <img class="w-full h-full object-cover" src="{{imageBaseUrl}}/w500/{{movie.poster_path}}" alt="">
      </div>
      <!-- Movie details -->
      <div class="flex flex-col gap-5">
        <div class="text-base">
          <h1 class="text-3xl">{{movie.title}}</h1>
          <div class="flex gap-3">
            <p>{{movie.release_date}}</p>
            -
            <ul class="flex">
              <li *ngFor="let genre of movie.genres; let last=last">
                <span>{{genre.name}}</span>
                <span class="mr-1" *ngIf="!last">,</span>
              </li>
            </ul>
            -
            <p>{{movie.runtime}}min</p>
          </div>
        </div>
        <div class="flex items-center gap-6">
          <div class="flex items-center gap-3">
            <div
              class="flex justify-center items-center w-14 h-14 rounded-full border-solid border-2 bg-purple-900 text-sm"
              *ngIf="movie.totalRating == 0">
              N/A
            </div>
            <div
              class="flex justify-center items-center w-14 h-14 rounded-full border-solid border-2 bg-purple-900 text-sm"
              *ngIf="movie.totalRating > 0">
              {{movie.totalRating}}
            </div>
            <p class="font-bold">User<br>Score</p>
          </div>
          <!-- Icons -->
          <div class="flex justify-center items-center w-11 h-11 rounded-full bg-cyan-900 text-sm">
            <fa-icon class="text-base cursor-pointer transition-all ease-in-out duration-300 hover:text-sky-500 "
              [icon]="faPlus"></fa-icon>
          </div>
          <div class="flex justify-center items-center w-11 h-11 rounded-full bg-cyan-900 text-sm">
            <fa-icon class="text-base cursor-pointer transition-all ease-in-out duration-300 hover:text-yellow-500"
              [icon]="faStar"></fa-icon>
          </div>
        </div>
        <p class="text-gray-300"><i>{{movie.tagline}}</i></p>
        <h2 class="font-bold text-xl">Overview</h2>
        <p>{{movie.overview}}</p>
      </div>
    </div>
  </div>

  <!-- Movie recommendations -->
  <div class="my-10 flex flex-col items-center">
    <h1 class="mb-5 text-2xl font-bold text-slate-950">Recommendations</h1>

    <!-- Loader -->
    <div *ngIf="isRecommendationLoading">
      <app-loader></app-loader>
    </div>

    <div class="relative px-11 w-full max-w-screen-xl" *ngIf="!isRecommendationLoading">
      <owl-carousel-o [options]="customOptions" (dragging)="isDragging = $event.dragging">
        <ng-container *ngFor="let movie of movies">
          <ng-template carouselSlide>
            <!-- Image card -->
            <div class="relative">
              <!-- Image container-->
              <div class="rounded-xl overflow-hidden cursor-pointer" owlRouterLink='/browse/movie/{{movie.id}}'
                [stopLink]="isDragging">
                <img class="max-w-10 aspect-[0.667] bg-gray-500" src="{{imageBaseUrl}}/w500/{{movie.poster_path}}"
                  alt="{{movie.title}} poster">
              </div>
              <!-- Icons -->
              <div class="flex flex-col items-center absolute top-3 right-2 z-10">
                <fa-icon
                  class="text-2xl text-white/80 cursor-pointer transition-all ease-in-out duration-300 hover:text-blue-500"
                  [icon]="faSquarePlus"></fa-icon>
                <fa-icon
                  class="text-2xl text-yellow-400 cursor-pointer transition-all ease-in-out duration-300 hover:text-yellow-600"
                  [icon]="faStar"></fa-icon>
              </div>
              <!-- Movie rating-->
              <div
                class="flex justify-center items-center absolute -bottom-2 -left-2 w-11 h-11 rounded-full border-solid border-2  bg-purple-900 text-sm">
                <div *ngIf="movie.totalVotes == 0">N/A</div>
                <div *ngIf="movie.totalVotes > 0">{{movie.totalRating}}</div>
              </div>
            </div>
            <!-- Movie details -->
            <p class="mt-3 font-semibold text-base text-slate-950">{{movie.title}}</p>
            <p class="text-sm text-slate-700">{{movie.release_date}}</p>
          </ng-template>
        </ng-container>
      </owl-carousel-o>
    </div>
  </div>

  <!-- Reviews -->
  <div class="my-10 flex flex-col items-center">
    <!-- Loader -->
    <div *ngIf="isReviewLoading">
      <app-loader></app-loader>
    </div>
    <div *ngIf="!isReviewLoading">

    </div>
  </div>
</div>